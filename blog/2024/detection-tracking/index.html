<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Evaluation metrics of Object Tracking Algorithms | हृषीकेश सिंह </title> <meta name="author" content="हृषीकेश सिंह"> <meta name="description" content="Collections of my thoughts, work and notes. "> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link defer href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%8C%90&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://hrishikeshh.github.io/blog/2024/detection-tracking/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">हृषीकेश</span> सिंह </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Research </a> </li> <li class="nav-item "> <a class="nav-link" href="/summaries/">ML Paper Summaries </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV </a> </li> <li class="nav-item "> <a class="nav-link" href="/library/">Library </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">Notes </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="row"> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">Evaluation metrics of Object Tracking Algorithms</h1> <p class="post-description"></p> </header> <article> <h3 id="detection-metrics">Detection Metrics</h3> <ul> <li>Mean Square Error: x, y, w, h</li> <li>L1-Loss</li> <li>IoU: Generally good for small target, Normalized [0 -&gt; 1].</li> </ul> <hr> <h3 id="multiple-object-detection">Multiple Object Detection</h3> <ul> <li> <p><strong>Hungarian Matching</strong> (<em>a.k.a. Bipartite Matching</em>)</p> <ul> <li>maximize over all IoU</li> <li>1 to 1 match</li> <li>Throw away matches with IoU &lt; 0.5.</li> <li>Remaining Matches = True Positives (TP)</li> <li>Some predictions are not matched to anything (FP)</li> <li>Some ground truth objects are not matched to anything (FN) <br> </li> <li>Problem with hungarian matching: Unstability i.e. object ID might be switched during occulusion.</li> </ul> </li> <li> <p><strong>Detection Accuracy (DetA)</strong></p> \[\frac{TP}{TP + FP + FN}\] <ul> <li>Depends only on current frame (not the video sequence)</li> <li>Depends on Hungarian matching</li> <li>Depends on IoU threshold (0.5)</li> <li>Good way since it pensalizes you for missing objects, detecting same object twice, or objects that are not there or inaccurately.</li> </ul> </li> </ul> <hr> <h3 id="multiple-object-tracking-benchmarking-mot">Multiple Object Tracking Benchmarking (MOT)</h3> <p><a href="https://motchallenge.net/data/MOT17/" rel="external nofollow noopener" target="_blank">MOT17 Challenge</a></p> <ul> <li>Ground truth <ul> <li>Set of frames of a video sequence</li> <li>For each frame - a set of GT objects</li> <li>Bounding box - x, y, w, h</li> <li>Object id - gtld</li> </ul> </li> <li>Prediction <ul> <li>For each frame - a set of predictions</li> <li>Bounding box - x, y, w, h</li> <li>trackld</li> </ul> </li> <li> <strong>Identity Switch</strong>: Occurs if same GT object us detected with different trackID. It is sovled by a modified version of Hungarian Match i.e. Sticky Hungarian Matching.</li> <li>Sticky Hungarian Matching <ul> <li>Similarity = IOU + 1000 * <same_track_id> but if IoU &lt; 0.5 then similarity is = O</same_track_id> </li> <li>Matching is done minimising new score.</li> </ul> </li> </ul> <p>So <strong>Multiple Object Tracking Accuracy (MOTA)</strong> is defined as</p> \[MOTA = 1 - \frac{|FN| + |FP| + |IDSW|}{|gtDet|}\] <p>here $IDSW$ is Identity Switch and $gtDet$ is Ground Truth Detection.</p> <ul> <li>It is dependent on Sticky Hungarian Matching, current &amp; previous frame and $IoU$ threshold (0.5).</li> </ul> <p><strong>Problems with MOTA</strong></p> <ul> <li>IDSW contribute ~1% to metric <p align="center"> <img src="assets/img/posts/metrics/HOTA.png" alt="Description" width="400" height="200"> </p> <ul> <li>Source: <a href="https://arxiv.org/abs/2009.07736#" rel="external nofollow noopener" target="_blank"><em>HOTA Paper.</em></a> A simple tracking example highlighting one of the main differences between evaluation metrics. Three different trackers are shown in order of increasing detection accuracy and decreasing association accuracy. MOTA and IDF1 overemphasize the effect of accurate detection and association respectively. HOTA balances both of these by being an explicit combination of a detection score DetA and an association score AssA.</li> <li>Does not take detection accuracy into account (beyond 0.5 IoU)</li> <li>So researchers sometimes prefer Multiple Object Tracking Precision (<em>MOTP</em>) <ul> <li> \[MOTP = \frac{1}{|TP|}\sum_{TP} IoU\] </li> </ul> </li> <li> <p>but then we have a different problem of having two metrics i.e. MOTA for object detection and MOTP for actually evaluating which trade off we want to take between tracking and detection accuracy.</p> <p align="center"> <img src="assets/img/posts/metrics/IDF1.png" alt="Description" width="400" height="200"> </p> </li> <li>In the above tracking example which shows how the single best trajectory matching, as performed by IDF1, can result in unintuitive matches between trajectories.</li> </ul> </li> </ul> <hr> <h3 id="idf1">IDF1</h3> <ul> <li> <p>IDF1 in context of <em>object tracking</em> is slighlty different from the conventional IDF (Inverse Document Frequency) component of the TF-IDF (Term Frequency-Inverse Document Frequency) weighting scheme.</p> </li> <li> <p>Unlike traditional metrics that focus on frame-level accuracy, IDF1 takes into account the entire identity of objects over time, making it particularly valuable for assessing how well a tracking algorithm maintains the identity of objects across multiple frames.</p> </li> <li> <p>The IDF1 score is defined as the harmonic mean of the Identification Precision (IDP) and Identification Recall (IDR). These two metrics are computed as follows:</p> <ul> <li> <p><strong>Identification Precision</strong> (IDP): The proportion of correctly identified detections (i.e., the correct matches of tracked objects to ground truth objects) relative to the total number of detections made by the tracker.</p> </li> <li> <p><strong>Identification Recall</strong> (IDR): The proportion of correctly identified ground truth objects relative to the total number of ground truth objects.</p> </li> </ul> </li> </ul> \[IDF1 = 2 X \frac{IDP X IDR}{IDP + IDR}\] <hr> <h3 id="hota">HOTA</h3> </article> </div> </div> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 हृषीकेश सिंह. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?b7816bd189846d29eded8745f9c4cf77"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script> </script> </body> </html>